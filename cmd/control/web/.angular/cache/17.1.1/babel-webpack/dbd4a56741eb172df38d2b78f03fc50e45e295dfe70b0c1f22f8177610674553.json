{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jpeery1/Desktop/byuoitav/camera-services/cmd/control/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ErrorDialog } from \"../../dialogs/error/error.dialog\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/api.service\";\nimport * as i3 from \"@angular/material/dialog\";\nconst _c0 = [\"form\"];\nexport let KeyLoginComponent = /*#__PURE__*/(() => {\n  class KeyLoginComponent {\n    constructor(router, api, dialog, route) {\n      var _this = this;\n      this.router = router;\n      this.api = api;\n      this.dialog = dialog;\n      this.route = route;\n      this.key = \"\";\n      this.getCodeChar = index => {\n        if (this.key.length > index) {\n          return this.key.charAt(index);\n        }\n        return \"\";\n      };\n      this.goToCameraControl = /*#__PURE__*/_asyncToGenerator(function* () {\n        _this.api.getControlInfo(_this.key).subscribe(info => {\n          return _this.router.navigate([\"/control/\" + info.room], {\n            queryParams: {\n              controlGroup: info.controlGroup\n            }\n          });\n        }, err => {\n          let msg = err.error;\n          switch (err.status) {\n            case 401:\n              msg = \"Invalid room code\";\n            default:\n          }\n          _this.showError(msg);\n        });\n        _this.key = \"\";\n      });\n    }\n    ngOnInit() {\n      document.title = \"BYU Camera Control\";\n    }\n    ngAfterViewInit() {\n      // If a key was passed in, use it and immediately call goToCameraControl\n      this.route.queryParams.subscribe(params => {\n        if (params['key']) {\n          this.key = params['key'];\n          this.goToCameraControl();\n        } else {\n          return this.router.navigate([\"/login\"]);\n        }\n      });\n    }\n    _focus() {}\n    hasFocus() {\n      return document.hasFocus();\n    }\n    showError(msg) {\n      const dialogs = this.dialog.openDialogs.filter(dialog => {\n        return dialog.componentInstance instanceof ErrorDialog;\n      });\n      if (dialogs.length > 0) {\n        return;\n      }\n      this.dialog.open(ErrorDialog, {\n        width: \"fit-content\",\n        data: {\n          msg: msg\n        }\n      });\n    }\n    static #_ = this.ɵfac = function KeyLoginComponent_Factory(t) {\n      return new (t || KeyLoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.APIService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: KeyLoginComponent,\n      selectors: [[\"key-login\"]],\n      viewQuery: function KeyLoginComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.form = _t.first);\n        }\n      },\n      decls: 1,\n      vars: 0,\n      consts: [[1, \"column\", 3, \"click\"]],\n      template: function KeyLoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵlistener(\"click\", function KeyLoginComponent_Template_div_click_0_listener() {\n            return ctx._focus();\n          });\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\".logo[_ngcontent-%COMP%]{height:30%;width:30%;display:flex;justify-content:center;align-items:center;pointer-events:none;margin-top:5%}.column[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;height:100%;width:100vw!important;justify-content:flex-start;align-items:center;font-size:22pt;color:#757575;overflow:visible;margin-left:0;margin-right:0}.sign-in[_ngcontent-%COMP%]{margin-top:3%;transform:scale(2)}.room-code[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-evenly;min-height:30px;height:30px}.code-char[_ngcontent-%COMP%]{width:20px;border-block-end:1px solid black;min-height:30px;height:30px}.code-char-selected[_ngcontent-%COMP%]{width:20px;border-block-end:1px solid black;min-height:30px;height:30px;animation:_ngcontent-%COMP%_blinkingText .8s infinite}@keyframes _ngcontent-%COMP%_blinkingText{0%{border-color:#000}49%{border-color:transparent}50%{border-color:transparent}99%{border-color:transparent}to{border-color:#000}}  .mat-form-field-underline{display:none}.loadingText[_ngcontent-%COMP%]{margin:5vh 0}@media (min-width: 768px){.code-char[_ngcontent-%COMP%]{width:20px;border-block-end:1px solid black;min-height:30px;height:30px}.logo[_ngcontent-%COMP%]{height:25%;width:25%;margin:25px}}.input-field[_ngcontent-%COMP%]{width:14vw;margin-left:.8vw;position:absolute;letter-spacing:1vw;opacity:0}\"]\n    });\n  }\n  return KeyLoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}